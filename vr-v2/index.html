<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <title>Vr Coding Room</title>
   <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-sharedspace-component@1.0.1/dist/aframe-sharedspace-component.min.js"></script>
   <script  src="https://rawgit.com/fernandojsg/aframe-teleport-controls/master/dist/aframe-teleport-controls.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v3.3.0/dist/aframe-physics-system.min.js"></script>
    <script src="spawn-in-circle.component.js"></script>
    <script src="sphereexpand.js"></script>
    <script src="backhome.js"></script>
    <script src="audiocontrols.js"></script>
    <script src="videopause.js"></script>
    <script src="videocontrols.js"></script>
    <script src="spaceship.js"></script>
    <script src="berlin.js"></script>
    <script src="videosphereexpand.js"></script>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <a class="hide" href="#">Hide</a>
  <section class="instructions">
    
   
    <span class="link"></span>
    <a class="move" href="./">Move to another room.</a>
  </section>
    <a-scene physics="debug: false; gravity: 0; restitution: 0.9; ">
      
        <a-assets>
          <img id="skyc" src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2Ftt.jpg?v=1575516485659" crossorigin="anonymous" />
          <img id="woodfloor" src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2Ffloor.jpg?v=1575516211889" crossorigin="anonymous" />
          <img id="wall" src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2Fwall.jpg?v=1575516686898" crossorigin="anonymous" />
          <img id="pic" src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2Fcode.PNG?v=1575516692950" crossorigin="anonymous" />
          <img id="pic2" src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2F22312742.jpg?v=1575515208081" crossorigin="anonymous" />
          <img id="pic3" src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2Fvr.png?v=1575516666332" crossorigin="anonymous" />
          <img id="spaces" src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2Fspaceship.png?v=1575516654426" crossorigin="anonymous" />
          <img id="berlin" src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2Fberlin.jpg?v=1575516405897" crossorigin="anonymous" />
          <img  id="bordeauxtheater"
            src="https://live.staticflickr.com/65535/49158982103_b95c8b60f9_k.jpg"
            crossorigin="anonymous"
          />
          <img id="p1" src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2Fmerp.jpg?v=1575553445372" crossorigin="anonymous" />
          <img id="p2" src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2Fstrawberry.jpg?v=1575553448604" crossorigin="anonymous" />
          <img id="p3" src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2Fthriller.jpg?v=1575555783050" crossorigin="anonymous" />
          <img id="p4" src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2FQueen.jpg?v=1575555589293" crossorigin="anonymous" />
          <audio
            id="song"
            src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2FAbba%20-%20Dancing%20Queen%20(Official%20Video).mp3?v=1575559549864"
            preload="auto"
            crossorigin="anonymous"
          ></audio>
          <audio
            id="song2"
            src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2FQueen%20Bohemian%20Rhapsody%20(Official%20Video%20Remastered).mp3?v=1575557687139"
            preload="auto"
            crossorigin="anonymous"
          ></audio>
          <audio
            id="song3"
            src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2FMichael%20Jackson%20-%20Thriller%20(Lyrics).mp3?v=1575559798110"
            preload="auto"
            crossorigin="anonymous"
          ></audio>
          <audio
            id="song4"
            src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2FBee%20Gees%20-%20Night%20Fever%20(1977).mp3?v=1575559179902"
            preload="auto"
            crossorigin="anonymous"
          ></audio>
          <video
            id="videoclip"
            loop="true"
            src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2Fvideo.mp4?v=1575517627637"
            crossorigin="anonymous"
          ></video>
          <video
            id="spherevidclip"
            loop="false"
            src="https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2Ffall.mp4?v=1575550178327"
            crossorigin="anonymous"
          ></video>
          <a-mixin id="me" look-controls wasd-controls share="position, rotation"></a-mixin>
        </a-assets>

        
       
<!-- <a-entity sharedspace="audio: true" avatars="onmyself: me"> -->
  <a-entity sharedspace="audio: true" avatars="onmyself: me">
  </a-entity>
        <!-- sky  -->
        <a-sky id="sky" src="#skyc"></a-sky>
   <a-entity id="cameraRig">
            <a-entity id="head" camera wasd-controls look-controls position="0 1.6 0">
               <a-text id="txt" value=" " position="0 0 -1" scale="0.5 0.5 0.5" align="center" color="#FFFFFF"></a-text>
            </a-entity>
     <a-entity cursor="rayOrigin: mouse"></a-entity>
            <a-entity id="ctlL"
                teleport-controls="cameraRig: #cameraRig; teleportOrigin: #head; startEvents: teleportstart; endEvents: teleportend"
                raycaster="objects: .collidable; far:1.2;" laser-controls="hand: left" input-listen>
                
            </a-entity>
            <a-entity id="ctlR" raycaster="objects: .collidable; far:1.2;" laser-controls="hand: right" input-listen>
                
            </a-entity>
        </a-entity>
        <!-- floor -->
        <a-entity id="architecture" class="homeworld">
          <a-plane
            id="floor"
            rotation="-90 90 0"
            width="30"
            height="30"
            src="#woodfloor"
            repeat="4 4"
          ></a-plane>
          <a-plane
            position="0 5 -15"
            width="30"
            height="10"
            src="#wall"
            repeat="2 1"
          ></a-plane>
          <a-plane
            position="-2.5 5 15"
            rotation="0 180 0"
            width="25"
            height="10"
            src="#wall"
            repeat="2 1"
          ></a-plane>
          <a-plane
            position="-15 5 0"
            rotation="0 90 0"
            width="30"
            height="10"
            src="#wall"
            repeat="2 1"
          ></a-plane>
          <a-plane
            position="15 5 0"
            rotation="0 -90 0"
            width="30"
            height="10"
            src="#wall"
            repeat="2 1"
          ></a-plane>
          <a-plane
            id="ceiling"
            position="0 10 0"
            scale="1 1 1"
            width="30"
            height="30"
            rotation="90 0 0"
            material="metalness:1; roughness:0; transparent: true; opacity: .7; shader: standard; 
             color: #faaf52; side:double;"
          ></a-plane>
        </a-entity>

        <!-- 360 video  -->
        <a-entity id="videospheredisplay" position="-7 0 -12">
          <a-box
            class="homeworld"
            color="black"
            rotation="0 35 0"
            width="1"
            height="2"
            depth=".5"
          ></a-box>
          <a-videosphere
            id="videosphereentity"
            position="0 1.8 0"
            radius=".7"
            src="#spherevidclip"
            videosphereexpand
          ></a-videosphere>
          <a-plane
            id="videospherecaption"
            class="homeworld"
            position=".5 .5 .5"
            rotation="-25 35 0"
            height=".6"
            width="auto"
            color="#191817"
            text="value: Crystal Shower Falls 360 Video; width: 2; wrapCount: 30; align: center"
          ></a-plane>
        </a-entity>

        <!-- codeplayground -->
        <a-entity id="picdisplay" class="homeworld" position="0 3 -14.9">
          <a-plane id="picframe" color="#191817" width="3" height="4"></a-plane>
          <a-plane
            id="picpainting"
            src="#pic"
            position="0.047 1.833 0.1"
            width="2.5"
            height="3.5"
            scale="8.011 2.874 2.436"
          ></a-plane>
        </a-entity>
        <!-- WALL IMAGES -->
        <a-plane
          id="picpainting2"
          class="homeworld"
          src="#pic2"
          position="14.58 4.557 -6.734"
          width="2.5"
          height="3.5"
          scale="5.317 1.898 2.063"
          rotation="0 -90.928 -0.115"
        ></a-plane>
        <a-plane
          id="picpainting3"
          class="homeworld"
          src="#pic3"
          position="14.58 4.634 7.345"
          width="2.5"
          height="3.5"
          scale="5.317 1.898 2.063"
          rotation="0 -90.928 -0.115"
        ></a-plane>

        <!-- spaceship -->
        <a-entity id="sp" class="homeworld" position="-13.671 -0.139 -8.316">
          <a-box
            color="black"
            rotation="0 35 0"
            width="1"
            height="2"
            depth=".5"
          ></a-box>
          <a-sphere
            position="0 1.8 0"
            radius=".7"
            src="#spaces"
            spaceship
            animation="property: rotation; to: 0 360 0; easing: easeInOutSine; dur: 30000; loop: true; elasticity: 0"
          ></a-sphere>
          <a-plane
            id="sp1"
            position="0.5 0.5 0.5"
            rotation="-25 35 0"
            height=".6"
            width="auto"
            color="#191817"
            text="align:center;value:This photosphere from Inside Spaceship;width:2;wrapCount:30"
            geometry="width:2"
          ></a-plane>
        </a-entity>

        <!-- museum -->
        <a-entity
          id="photospheredisplay"
          class="homeworld"
          position="-11 0 -11"
        >
          <a-box
            color="black"
            rotation="0 35 0"
            width="1"
            height="2"
            depth=".5"
          ></a-box>
          <a-sphere
            position="0 1.8 0"
            radius=".7"
            src="#bordeauxtheater"
            sphereexpand
            animation="property: rotation; to: 0 360 0; easing: easeInOutSine; dur: 30000; loop: true; elasticity: 0"
          ></a-sphere>
          <a-plane
            id="photospherecaption"
            position=".5 .5 .5"
            rotation="-25 35 0"
            height=".6"
            width="auto"
            color="#191817"
            text="value: This photosphere from IBM Museium ; width: 2; wrapCount: 30; align: center"
          ></a-plane>
        </a-entity>

        <!-- Berlin museum -->
        <a-entity
          id="sp2"
          class="homeworld"
          position="-14.094 0.076 -3.274"
          rotation="0 51.27972266420868 0"
        >
          <a-box
            color="black"
            rotation="0 35 0"
            width="1"
            height="2"
            depth=".5"
          ></a-box>
          <a-sphere
            position="0 1.8 0"
            radius=".7"
            src="#berlin"
            berlinpic
            animation="property: rotation; to: 0 360 0; easing: easeInOutSine; dur: 30000; loop: true; elasticity: 0"
          ></a-sphere>
          <a-plane
            id="sp23"
            position="0.5 0.5 0.5"
            rotation="-25 35 0"
            height=".6"
            width="auto"
            color="#191817"
            text="align:center;value:This photosphere from IBM Museium;width:2;wrapCount:30"
            geometry="width:2"
          ></a-plane>
        </a-entity>

        <!-- Song -->
        <a-entity
          id="musicpanel"
          class="world"
          position="-4.419 3 14.922"
          rotation="1.0313240312354817 178.87742363984302 0.6302535746439055"
          sound="song"
        >
          <a-plane
            width="2.5"
            height="3.5"
            position="0 -0.06 0"
            shader="flat"
            src="#p1"
            side="double"
          ></a-plane>
          

          <a-plane
            id="playbox"
            depth=".01"
            scale="0.3 0.3 0.3"
            position="-0.673 -1.22 0.01"
            shader="flat"
            width="2"
            height="2"
            material="color:#191817"
            transparent="true"
            opacity=".9"
            songplayer=""
          >
            <a-triangle
              id="playicon"
              color="white"
              depth=".01"
              rotation="0 0 -90"
              position="0.1 -0.02 0.06"
              shader="flat"
              width="2"
              height="2"
              vertex-a="0 .3 0"
            >
            </a-triangle>
          </a-plane>

          <a-plane
            id="stopbox"
            scale="0.3 0.3 0.3"
            position="0 -1.22 0.01"
            shader="flat"
            width="2"
            height="2"
            material="color:#191817"
            transparent="true"
            opacity=".9"
            songstopper=""
          >
            <a-plane
              id="stopicon"
              color="white"
              position="0 0 0.06"
              shader="flat"
              width="1"
              height="1"
            >
            </a-plane>
          </a-plane>

          <a-plane
            id="pausebox"
            scale="0.3 0.3 0.3"
            position="0.673 -1.22 0.01"
            shader="flat"
            width="2"
            height="2"
            material="color:#191817"
            transparent="true"
            opacity=".9"
            songpauser
          >
            <a-plane
              id="pauseiconleft"
              color="white"
              depth=".1"
              position="-0.4 0 0.06"
              shader="flat"
              width=".5"
              height="1"
            ></a-plane>
            <a-plane
              id="pauseiconright"
              color="white"
              depth=".1"
              position="0.4 0 0.06"
              shader="flat"
              width=".5"
              height="1"
            ></a-plane>
          </a-plane>
        </a-entity>

        <!-- Song 2 -->
        <a-entity
          id="musicpanel2"
          class="world"
          position="-4.356 6.918 14.922"
          rotation="1.0313240312354817 178.87742363984302 0.8594366926962348"
          sound="#song2"
        >
          <a-plane
            width="2.5"
            height="3.5"
            position="0 -0.06 0"
            shader="flat"
            src="#p2"
            side="double"
          ></a-plane>
           

          <a-plane
            id="playbox2"
            depth=".01"
            scale="0.3 0.3 0.3"
            position="-0.673 -1.22 0.01"
            shader="flat"
            width="2"
            height="2"
            material="color:#191817"
            transparent="true"
            opacity=".9"
            songplayer
          >
            <a-triangle
              id="playicon2"
              color="white"
              depth=".01"
              rotation="0 0 -90"
              position="0.1 -0.02 0.06"
              shader="flat"
              width="2"
              height="2"
              vertex-a="0 .3 0"
            >
            </a-triangle>
          </a-plane>

          <a-plane
            id="stopbox2"
            scale="0.3 0.3 0.3"
            position="0 -1.22 0.01"
            shader="flat"
            width="2"
            height="2"
            material="color:#191817"
            transparent="true"
            opacity=".9"
            songstopper=""
          >
            <a-plane
              id="stopicon2"
              color="white"
              position="0 0 0.06"
              shader="flat"
              width="1"
              height="1"
            >
            </a-plane>
          </a-plane>

          <a-plane
            id="pausebox2"
            scale="0.3 0.3 0.3"
            position="0.673 -1.22 0.01"
            shader="flat"
            width="2"
            height="2"
            material="color:#191817"
            transparent="true"
            opacity=".9"
            songpauser=""
          >
            <a-plane
              id="pauseiconleft2"
              color="white"
              depth=".1"
              position="-0.4 0 0.06"
              shader="flat"
              width=".5"
              height="1"
            ></a-plane>
            <a-plane
              id="pauseiconright2"
              color="white"
              depth=".1"
              position="0.4 0 0.06"
              shader="flat"
              width=".5"
              height="1"
            ></a-plane>
          </a-plane>
        </a-entity>

        <!-- song 3 -->
        <a-entity
          id="musicpanel3"
          class="world"
          position="-7.55 3.014 14.922"
          rotation="1.0313240312354817 178.87742363984302 0.9740282517223996"
          sound="song3"
        >
          <a-plane
            width="2.5"
            height="3.5"
            position="0 -0.06 0"
            shader="flat"
            src="#p3"
            side="double"
          ></a-plane>
           

          <a-plane
            id="playbox3"
            depth=".01"
            scale="0.3 0.3 0.3"
            position="-0.673 -1.22 0.01"
            shader="flat"
            width="2"
            height="2"
            material="color:#191817"
            transparent="true"
            opacity=".9"
            songplayer
          >
            <a-triangle
              id="playicon3"
              color="white"
              depth=".01"
              rotation="0 0 -90"
              position="0.1 -0.02 0.06"
              shader="flat"
              width="2"
              height="2"
              vertex-a="0 .3 0"
            >
            </a-triangle>
          </a-plane>

          <a-plane
            id="stopbox3"
            scale="0.3 0.3 0.3"
            position="0 -1.22 0.01"
            shader="flat"
            width="2"
            height="2"
            material="color:#191817"
            transparent="true"
            opacity=".9"
            songstopper=""
          >
            <a-plane
              id="stopicon3"
              color="white"
              position="0 0 0.06"
              shader="flat"
              width="1"
              height="1"
            >
            </a-plane>
          </a-plane>

          <a-plane
            id="pausebox3"
            scale="0.3 0.3 0.3"
            position="0.673 -1.22 0.01"
            shader="flat"
            width="2"
            height="2"
            material="color:#191817"
            transparent="true"
            opacity=".9"
            songpauser=""
          >
            <a-plane
              id="pauseiconleft3"
              color="white"
              depth=".1"
              position="-0.4 0 0.06"
              shader="flat"
              width=".5"
              height="1"
            ></a-plane>
            <a-plane
              id="pauseiconright3"
              color="white"
              depth=".1"
              position="0.4 0 0.06"
              shader="flat"
              width=".5"
              height="1"
            ></a-plane>
          </a-plane>
        </a-entity>

        <!-- song 4 -->
        <a-entity
          id="musicpanel-2"
          class="world"
          position="-7.478 6.98 14.922"
          rotation="1.0313240312354817 178.87742363984302 0.9740282517223996"
          sound="song4"
        >
          <a-plane
            width="2.5"
            height="3.5"
            position="0 -0.082 0"
            shader="flat"
            src="#p4"
            side="double"
          ></a-plane>
          
          <a-plane
            id="playbox4"
            depth=".01"
            scale="0.3 0.3 0.3"
            position="-0.673 -1.22 0.01"
            shader="flat"
            width="2"
            height="2"
            material="color:#191817"
            transparent="true"
            opacity=".9"
            songplayer
          >
            <a-triangle
              id="playicon4"
              color="white"
              depth=".01"
              rotation="0 0 -90"
              position="0.1 -0.02 0.06"
              shader="flat"
              width="2"
              height="2"
              vertex-a="0 .3 0"
            >
            </a-triangle>
          </a-plane>

          <a-plane
            id="stopbox4"
            scale="0.3 0.3 0.3"
            position="0 -1.22 0.01"
            shader="flat"
            width="2"
            height="2"
            material="color:#191817"
            transparent="true"
            opacity=".9"
            songstopper=""
          >
            <a-plane
              id="stopicon4"
              color="white"
              position="0 0 0.06"
              shader="flat"
              width="1"
              height="1"
            >
            </a-plane>
          </a-plane>

          <a-plane
            id="pausebox4"
            scale="0.3 0.3 0.3"
            position="0.673 -1.22 0.01"
            shader="flat"
            width="2"
            height="2"
            material="color:#191817"
            transparent="true"
            opacity=".9"
            songpauser=""
          >
            <a-plane
              id="pauseiconleft4"
              color="white"
              depth=".1"
              position="-0.4 0 0.06"
              shader="flat"
              width=".5"
              height="1"
            ></a-plane>
            <a-plane
              id="pauseiconright4"
              color="white"
              depth=".1"
              position="0.4 0 0.06"
              shader="flat"
              width=".5"
              height="1"
            ></a-plane>
          </a-plane>
        </a-entity>

        <!-- web development video  -->
        <a-video
          src="#videoclip"
          class="homeworld"
          position="-14.9 4.71 7.916"
          rotation="0 90 0"
          width="5"
          height="5"
          scale="2.531 1 1"
        >
          <a-plane
            id="vidplaybox"
            depth=".01"
            scale="0.3 0.3 0.3"
            position="-0.35 -2 0.01"
            shader="flat"
            width="2"
            height="2"
            material="color:#191817"
            transparent="true"
            opacity=".9"
            videoplayer
          >
            <a-triangle
              id="vidplayicon"
              color="white"
              depth=".01"
              rotation="0 0 -90"
              position="0.1 -0.02 0.06"
              shader="flat"
              width="2"
              height="2"
              vertex-a="0 .3 0"
            >
            </a-triangle>
          </a-plane>

          <a-plane
            id="vidpausebox"
            scale="0.3 0.3 0.3"
            position="0.35 -2 0.01"
            shader="flat"
            width="2"
            height="2"
            material="color:#191817"
            transparent="true"
            opacity=".9"
            vid
          >
            <a-plane
              id="vidpauseiconleft"
              color="white"
              depth=".1"
              position="-0.4 0 0.06"
              shader="flat"
              width=".5"
              height="1"
            ></a-plane>
            <a-plane
              id="vidpauseiconright"
              color="white"
              depth=".1"
              position="0.4 0 0.06"
              shader="flat"
              width=".5"
              height="1"
            ></a-plane>
          </a-plane>
        </a-video>

        <a-circle
          id="homebutton"
          position="0 .1 0"
          rotation="-90 0 0"
          backhome
        ></a-circle>
<!--        room settings -->
     
    <a-plane position="3.18925 7.56929 14.00999" width="2" height=".5" transparent="false" opacity=".9" color="#191817" text="align: center; value: Vr Coding Room Settings; width: 4" material="" geometry="" rotation="179.808 0.4744090543683216 -179.99870204491404"></a-plane>
    
    
    
<!--     avartar -->
    
    <template>
      <a-entity>
        <a-entity
          obj-model="obj: url(https://cdn.glitch.com/cb64928c-dc5b-41f5-b93c-caed293caa13%2FVR_simple.obj?v=1575545775994)"
                  position="0 0 0.210"
          rotation="0 180 0"
          scale="0.12 0.27 0.30"
        ></a-entity>
       
      </a-entity>
    </template>
    <script>
      var hideButton = document.querySelector(".hide");
      var instructions = document.querySelector(".instructions");
      hideButton.onclick = function(evt) {
        instructions.classList.toggle("hidden");
        this.textContent = instructions.classList.contains("hidden")
          ? "Show"
          : "Hide";
        return false;
      };

      var scene = document.querySelector("a-scene");
      var room = document.querySelector("[sharedspace]");
      var table = document.querySelector(".table");

      // Make the avatar to look at the center of the table.
      room.addEventListener("avataradded", function onAdded(evt) {
        // Fixing should happen after the avatar fully loads.
        // Only then, it is safe to alter the avatarâ€™s components.
        var avatar = evt.detail.avatar;
        if (!avatar.hasLoaded) {
          avatar.addEventListener("loaded", onAdded.bind(null, evt));
          return;
        }

        var tablePosition = table.getAttribute("position");
        var avatarY = avatar.getAttribute("position").y;
        avatar.object3D.lookAt(
          new THREE.Vector3(tablePosition.x, avatarY, tablePosition.z)
        );

        // It is not enough to modify the underlaying Three object. It is
        // neccessary to use the A-Frame API for the sharedspace component to
        // be able of serialize the rotation correctly.
        var radToDeg = THREE.Math.radToDeg;
        var rotation = avatar.object3D.rotation;
        rotation.y += Math.PI;

        avatar.setAttribute("rotation", {
          x: radToDeg(rotation.x),
          y: radToDeg(rotation.y),
          z: radToDeg(rotation.z)
        });
      });

      // Create a new room or join one.
      let roomName = window.location.search.substr(1);
      let vr="vrcoding"
      if (!roomName) {
        roomName = "room-" + vr;
        history.pushState({}, "", window.location + `?${roomName}`);
      } else {
        hideButton.click();
      }
      connect();

      function connect() {
        if (!scene.hasLoaded) {
          scene.addEventListener("loaded", connect);
          return;
        }
        room.setAttribute("sharedspace", { room: roomName, hold: false });
      }

      // Select link on click.
      var link = document.querySelector(".link");
      link.textContent = window.location.href;
      link.onclick = function() {
        var range = document.createRange();
        range.selectNode(link);
        var selection = document.getSelection();
        selection.empty();
        selection.addRange(range);
      };
    </script>
    <script>
    AFRAME.registerComponent('input-listen', {
        init:
            function () {
                //Declaration and initialization of flag 
                //which exprains grip button is pressed or not.
                //"this.el" reffers ctlR or L in this function
                this.el.grip = false;
              
                
                this.el.sumY=1
              
             
                this.el.addEventListener('axismove',function(e){
                
                  
                  txt.setAttribute("value",e.detail.axis[0].toFixed(2)+","+e.detail.axis[1].toFixed(2));
                  
                  
                  this.sumY+=(-e.detail.axis[1]*0.01);
                  
                });

                      
                this.el.addEventListener('triggerdown', function (e) {
                  
                  var point = this.object3D.getWorldPosition();
          
                  var ball = document.createElement('a-sphere');
                  ball.setAttribute('class', 'ball');
                  ball.setAttribute('scale', '0.2 0.2 0.2');
                  ball.setAttribute('position', point);
                  
                  ball.setAttribute('dynamic-body', 'shape: sphere; sphereRadius:0.2; ');
                  //Instantiate ball entity in a-scene
                  var scene = document.querySelector('a-scene');
                  scene.appendChild(ball);
                  
                  
              
                  var dir = this.getAttribute("raycaster").direction;
                   
                  var force = new THREE.Vector3(dir.x, dir.y, dir.z);
                 
                  force.multiplyScalar(2000);
                  
                  ball.force = this.object3D.localToWorld(force); 

                  
                    ball.addEventListener('body-loaded', function (e) {
                      
                      var p = this.object3D.position;
                      
                      var f = this.force;
                      
                      this.body.applyForce(
                        new CANNON.Vec3(f.x, f.y, f.z), new CANNON.Vec3(p.x, p.y, p.z)
                      );
                    }); 
                  
                });
                //Grip Pressed
                this.el.addEventListener('gripdown', function (e) {
                    //Setting grip flag as true.
                    
                    this.sumY=1;
                    this.grip = true;
                });
                //Grip Released
                this.el.addEventListener('gripup', function (e) {
                    //Setting grip flag as false.
                    this.grip = false;
                });
                //Raycaster intersected with something.
                this.el.addEventListener('raycaster-intersection', function (e) {
                    //Store first selected object as selectedObj 
                    this.selectedObj = e.detail.els[0];
                });
                //Raycaster intersection is finished.
                this.el.addEventListener('raycaster-intersection-cleared', function (e) {
                    //Clear information of selectedObj
                    this.selectedObj = null;
                });
                
                //X-buttorn Pressed 
                this.el.addEventListener('xbuttondown', function (e) {
                    //Start pointing position to teleport  
                    this.emit('teleportstart');
                });
                //X-buttorn Released 
                this.el.addEventListener('xbuttonup', function (e) {
                    //Jump to pointed position
                    this.emit('teleportend');
                });
              
                this.el.addEventListener('abuttondown', function (e) {
                   
                  var els = document.querySelectorAll('.ball');
              
                    for (var i = 0; i < els.length; i++) {
                      els[i].parentNode.removeChild(els[i]);
                    }
                });
                //console.log(this);
              
            },
        //called evry frame.
        tick: function () {
            if (!this.el.selectedObj) { return; }
            if (this.el.grip == false) { return; }
            //Getting raycaster component which is attatched to ctlR or L
            //this.el means entity of ctlR or L in this function.
            var ray = this.el.getAttribute("raycaster").direction;
            //setting tip of raycaster as 1.1m forward of controller.  
            var p = new THREE.Vector3(ray.x, ray.y, ray.z);
            p.normalize();
            p.multiplyScalar(1.2*this.el.sumY);
            //Convert local position into world coordinate.
            this.el.object3D.localToWorld(p);
            //Move selected object to follow the tip of raycaster.
            this.el.selectedObj.object3D.position.set(p.x, p.y, p.z);
        }
    });
</script>
  </body>
</html>
